<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Corporate Online - Modal Dialog</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <link rel="stylesheet" type="text/css" href="/LegacySite/Styles/co.css" id="mainStylesheet">
    <script type="text/javascript" src="/LegacySite/Scripts/jquery-1.4.2.js"></script>
    <script type="text/javascript" src="/LegacySite/Scripts/scripts.js"></script>
    <script type="text/javascript">
        // Dynamic legacy metrics functions (legacy browser compatibility)
        function calculateLegacyMetrics() {
            var metrics = { inlineStyles: 0, stylesheetStyles: 0, hiddenTables: 0, nestingLevels: 0, fontTags: 0, tableCount: 0, legacyHacks: 0 };
            var elementsWithStyle = document.querySelectorAll ? document.querySelectorAll('*[style]') : [];
            metrics.inlineStyles = elementsWithStyle.length;
            var stylesheets = document.styleSheets;
            for (var i = 0; i < stylesheets.length; i++) {
                try { 
                    if (stylesheets[i].cssRules) metrics.stylesheetStyles += stylesheets[i].cssRules.length; 
                } catch (e) { 
                    metrics.stylesheetStyles += 50; 
                }
            }
            var allTables = document.getElementsByTagName('table');
            for (var i = 0; i < allTables.length; i++) {
                var table = allTables[i];
                metrics.tableCount++;
                var style = window.getComputedStyle ? window.getComputedStyle(table) : table.currentStyle;
                if (style && (style.display === 'none' || style.visibility === 'hidden')) {
                    metrics.hiddenTables++; 
                    metrics.legacyHacks++;
                }
            }
            metrics.fontTags = document.getElementsByTagName('font').length;
            return metrics;
        }
        
        function generateMetricsContent() {
            var metrics = calculateLegacyMetrics();
            var totalStyles = metrics.inlineStyles + metrics.stylesheetStyles;
            var inlinePercentage = totalStyles > 0 ? Math.round((metrics.inlineStyles / totalStyles) * 100) : 0;
            var pageName = document.title.replace('Corporate Online - ', '') || 'Unknown Page';
            return '<h4 style="margin: 0 0 10px 0; color: #333;">Legacy Code Analysis - ' + pageName + '</h4>' +
                   '<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; font-size: 11px;">' +
                   '<div><strong>CSS Distribution:</strong><br>• Inline CSS: ' + inlinePercentage + '% (' + metrics.inlineStyles + ' elements)<br>' +
                   '• Stylesheet CSS: ' + (100-inlinePercentage) + '% (' + metrics.stylesheetStyles + ' rules)<br><br>' +
                   '<strong>Inline CSS Controls:</strong><br>• Elements with style attributes: ' + metrics.inlineStyles + '<br>' +
                   '• Font tags used: ' + metrics.fontTags + '<br>• Hidden compatibility tables: ' + metrics.hiddenTables + '<br></div>' +
                   '<div><strong>Legacy Artifacts:</strong><br>• Total tables: ' + metrics.tableCount + '<br>' +
                   '• Hidden browser hacks: ' + metrics.legacyHacks + '<br>• Legacy font tags: ' + metrics.fontTags + '<br>' +
                   '• Modal dialog positioning hacks<br><br><strong>Compatibility Issues:</strong><br>' +
                   '• JavaScript-based centering<br>• Cross-browser overlay handling</div></div>';
        }
        
        function toggleMetrics() {
            var panel = document.getElementById('metricsPanel');
            var button = document.getElementById('metricsToggle');
            if (panel && button) {
                if (panel.style.display === 'none' || panel.style.display === '') {
                    var contentDiv = panel.querySelector('div[style*="max-width"]');
                    if (contentDiv) contentDiv.innerHTML = generateMetricsContent();
                    panel.style.display = 'block';
                    button.innerHTML = 'Hide Legacy Metrics';
                    button.style.background = '#f44336';
                } else {
                    panel.style.display = 'none';
                    button.innerHTML = 'Show Legacy Metrics';
                    button.style.background = '#4CAF50';
                }
            }
        }
    </script>
</head>
<body onload="centerDialog();">
    <!-- Hidden IE6/Netscape compatibility spacer tables (legacy browser hacks) -->
    <table width="0" height="0" border="0" cellspacing="0" cellpadding="0" style="display: none; visibility: hidden;">
        <tr><td>&nbsp;</td></tr>
    </table>
    <!-- IE6 hasLayout trigger hack -->
    <div style="zoom: 1; display: none;"></div>
    <!-- Netscape 4.x clearfix hack -->
    <br clear="all" style="display: none;">
    <!-- Safari 1.x font rendering hack -->
    <table width="1" height="1" border="0" cellspacing="0" cellpadding="0" style="position: absolute; left: -9999px; top: -9999px;">
        <tr><td style="font-size: 1px; line-height: 1px;">&nbsp;</td></tr>
    </table>
    
    <!-- Modal Dialog Container -->
    <div id="modalDialog" class="legacyui" style="position: absolute; width: 450px; border: 2px solid #003366; background-color: #FFFFFF;">
        <table width="100%" border="0" cellspacing="0" cellpadding="3" bgcolor="#003366">
            <tr>
                <td>
                    <font face="Verdana, Arial, Helvetica, sans-serif" size="2" color="#FFFFFF">
                        <b>Important Security Notice</b>
                    </font>
                </td>
                <td align="right">
                    <a href="#" onclick="window.close();" style="color: #FFFFFF; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 10px; text-decoration: none;">
                        <b>Close [X]</b>
                    </a>
                </td>
            </tr>
        </table>
        <table width="100%" border="0" cellspacing="0" cellpadding="10">
            <tr>
                <td align="center">
                    <marquee behavior="scroll" direction="left" scrollamount="3" style="background-color: #FFFFCC; border: 1px solid #FFCC00; width: 100%; height: 20px;">
                        <font face="Verdana, Arial, Helvetica, sans-serif" size="1" color="#FF0000">
                            <b>ATTENTION: For your security, please ensure you log out when finished with your banking session.</b>
                        </font>
                    </marquee>
                </td>
            </tr>
            <tr>
                <td>
                    <table width="100%" border="0" cellspacing="0" cellpadding="5">
                        <tr>
                            <td width="64" align="center" valign="top">
                                <img src="/LegacySite/Data/security_icon.gif" width="48" height="48" border="0" alt="Security">
                            </td>
                            <td>
                                <font face="Verdana, Arial, Helvetica, sans-serif" size="2">
                                    Your last successful login was on <b>24/05/2005 at 10:32 AM</b>.<br><br>
                                    There have been <b>0</b> unsuccessful login attempts since your last login.<br><br>
                                    For your security, your session will automatically time out after 10 minutes of inactivity.
                                </font>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="center" bgcolor="#F5F5F5">
                    <font face="Verdana, Arial, Helvetica, sans-serif" size="1">
                        As an additional security measure, please check that the URL in your browser address bar begins with:<br>
                        <b>https://secure.corporateonline.com.au/</b>
                    </font>
                </td>
            </tr>
            <tr>
                <td align="center">
                    <input type="button" value="Acknowledge and Continue" onclick="window.close();" style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 10px; width: 180px; cursor: hand;">
                </td>
            </tr>
        </table>
    </div>
    <!-- End Modal Dialog Container -->

    <!-- Backdrop Overlay -->
    <div id="overlay" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; background-color: #000000; filter: alpha(opacity=50); opacity: 0.5;"></div>
    <!-- End Backdrop Overlay -->
</body>
</html>
