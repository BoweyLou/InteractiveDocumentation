<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Corporate Online - Account Settings</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <link rel="stylesheet" type="text/css" href="/LegacySite/Styles/co.css" id="mainStylesheet">
    <script type="text/javascript" src="/LegacySite/Scripts/jquery-1.4.2.js"></script>
    <script type="text/javascript" src="/LegacySite/Scripts/scripts.js"></script>
    <script type="text/javascript">
    <!--
    // Dynamic legacy metrics functions (legacy browser compatibility)
    function calculateLegacyMetrics() {
        var metrics = { inlineStyles: 0, stylesheetStyles: 0, hiddenTables: 0, nestingLevels: 0, fontTags: 0, tableCount: 0, legacyHacks: 0 };
        var elementsWithStyle = document.querySelectorAll ? document.querySelectorAll('*[style]') : [];
        metrics.inlineStyles = elementsWithStyle.length;
        var stylesheets = document.styleSheets;
        for (var i = 0; i < stylesheets.length; i++) {
            try { if (stylesheets[i].cssRules) metrics.stylesheetStyles += stylesheets[i].cssRules.length; }
            catch (e) { metrics.stylesheetStyles += 50; }
        }
        var allTables = document.getElementsByTagName('table');
        for (var i = 0; i < allTables.length; i++) {
            var table = allTables[i];
            metrics.tableCount++;
            var style = window.getComputedStyle ? window.getComputedStyle(table) : table.currentStyle;
            if (style && (style.display === 'none' || style.visibility === 'hidden')) {
                metrics.hiddenTables++; 
                metrics.legacyHacks++;
            }
        }
        metrics.fontTags = document.getElementsByTagName('font').length;
        return metrics;
    }
    
    function generateMetricsContent() {
        var metrics = calculateLegacyMetrics();
        var totalStyles = metrics.inlineStyles + metrics.stylesheetStyles;
        var inlinePercentage = totalStyles > 0 ? Math.round((metrics.inlineStyles / totalStyles) * 100) : 0;
        var pageName = document.title.replace('Corporate Online - ', '') || 'Unknown Page';
        return '<h4 style="margin: 0 0 10px 0; color: #333;">Legacy Code Analysis - ' + pageName + '</h4>' +
               '<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; font-size: 11px;">' +
               '<div><strong>CSS Distribution:</strong><br>• Inline CSS: ' + inlinePercentage + '% (' + metrics.inlineStyles + ' elements)<br>' +
               '• Stylesheet CSS: ' + (100-inlinePercentage) + '% (' + metrics.stylesheetStyles + ' rules)<br><br>' +
               '<strong>Inline CSS Controls:</strong><br>• Elements with style attributes: ' + metrics.inlineStyles + '<br>' +
               '• Font tags used: ' + metrics.fontTags + '<br>• Hidden compatibility tables: ' + metrics.hiddenTables + '<br></div>' +
               '<div><strong>Legacy Artifacts:</strong><br>• Total tables: ' + metrics.tableCount + '<br>' +
               '• Hidden browser hacks: ' + metrics.legacyHacks + '<br>• Legacy font tags: ' + metrics.fontTags + '<br>' +
               '• Mixed form validation patterns<br><br><strong>Compatibility Issues:</strong><br>' +
               '• Inconsistent input sizing methods<br>• Legacy browser compatibility hacks</div></div>';
    }
    
    function toggleMetrics() {
        var panel = document.getElementById('metricsPanel');
        var button = document.getElementById('metricsToggle');
        if (panel && button) {
            if (panel.style.display === 'none' || panel.style.display === '') {
                var contentDiv = panel.querySelector('div[style*="max-width"]');
                if (contentDiv) contentDiv.innerHTML = generateMetricsContent();
                panel.style.display = 'block';
                button.innerHTML = 'Hide Legacy Metrics';
                button.style.background = '#f44336';
            } else {
                panel.style.display = 'none';
                button.innerHTML = 'Show Legacy Metrics';
                button.style.background = '#4CAF50';
            }
        }
    }
    
    // Validate the settings form before submission
    function validateForm() {
        var phoneNumber = document.settingsForm.phoneNumber.value;
        var email = document.settingsForm.email.value;
        var password = document.settingsForm.password.value;
        var confirmPassword = document.settingsForm.confirmPassword.value;
        
        // Phone number validation
        if (phoneNumber != "" && !phoneNumber.match(/^\d{10}$/)) {
            alert("Please enter a valid 10-digit phone number.");
            document.settingsForm.phoneNumber.focus();
            return false;
        }
        
        // Email validation
        if (email != "" && !email.match(/^[\w\.-]+@[\w\.-]+\.\w+$/)) {
            alert("Please enter a valid email address.");
            document.settingsForm.email.focus();
            return false;
        }
        
        // Password validation
        if (password != "" && password.length < 6) {
            alert("Password must be at least 6 characters long.");
            document.settingsForm.password.focus();
            return false;
        }
        
        // Password match validation
        if (password != confirmPassword) {
            alert("Passwords do not match.");
            document.settingsForm.confirmPassword.focus();
            return false;
        }
        
        alert("Settings updated successfully!");
        return true;
    }
    
    // Validate phone number when field loses focus
    function validatePhone(field) {
        var value = field.value;
        if (value != "" && !value.match(/^\d{10}$/)) {
            field.style.backgroundColor = "#FFCCCC";
            document.getElementById("phoneError").style.visibility = "visible";
        } else {
            field.style.backgroundColor = "#FFFFFF";
            document.getElementById("phoneError").style.visibility = "hidden";
        }
    }
    
    // Validate email when field loses focus
    function validateEmail(field) {
        var value = field.value;
        if (value != "" && !value.match(/^[\w\.-]+@[\w\.-]+\.\w+$/)) {
            field.style.backgroundColor = "#FFCCCC";
            document.getElementById("emailError").style.visibility = "visible";
        } else {
            field.style.backgroundColor = "#FFFFFF";
            document.getElementById("emailError").style.visibility = "hidden";
        }
    }
    //-->
    </script>
</head>
<body>
    <!-- Global Header with Metrics -->
    <div id="globalHeader" style="background-color: #000033 !important; padding: 5px 0 !important; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif !important; color: #FFFFFF !important; font-size: 12px !important; border-bottom: 1px solid #333 !important; position: relative !important; z-index: 10000 !important;">
        <div style="display: flex !important; justify-content: space-between !important; align-items: center !important; max-width: 1200px !important; margin: 0 auto !important; padding: 0 20px !important;">
            <a href="/" style="color: #FFFFFF !important; text-decoration: none !important; font-weight: bold !important; padding: 8px 16px !important; background-color: rgba(255,255,255,0.1) !important; border-radius: 4px !important;">← Return to Version Selector</a>
            <div style="display: flex !important; gap: 10px !important; align-items: center !important;">
                <button id="styleToggle" onclick="toggleStylesheet()" style="background: #FF9800 !important; color: white !important; border: none !important; padding: 6px 12px !important; border-radius: 4px !important; cursor: pointer !important; font-size: 11px !important;">Legacy CSS</button>
                <button id="metricsToggle" onclick="toggleMetrics()" style="background: #4CAF50 !important; color: white !important; border: none !important; padding: 6px 12px !important; border-radius: 4px !important; cursor: pointer !important; font-size: 11px !important;">Show Legacy Metrics</button>
            </div>
        </div>
        <div id="metricsPanel" style="display: none !important; background-color: #f8f9fa !important; color: #333 !important; padding: 15px !important; margin-top: 10px !important; border-top: 1px solid #ddd !important;">
            <div style="max-width: 1200px !important; margin: 0 auto !important;">
                <div id="metricsContent">Loading metrics...</div>
            </div>
        </div>
    </div>

    
    <!-- Main Table Container for centring -->
    <table width="100%" height="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td align="center" valign="top">
                <!-- Content Table with fixed width -->
                <table width="780" border="0" cellspacing="0" cellpadding="0" class="legacyui" bgcolor="#FFFFFF">
                    <tr>
                        <td colspan="3" bgcolor="#003366" height="80">
                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                <tr>
                                    <td width="20"><img src="/LegacySite/Data/spacer.gif" width="20" height="1" border="0" alt=""></td>
                                    <td>
                                        <span class="brandText"><b>Corporate Online</b></span><br>
                                        <span class="taglineText">Secure Banking Portal</span>
                                    </td>
                                    <td align="right">
                                        <table border="0" cellspacing="0" cellpadding="2">
                                            <tr>
                                                <td align="right">
                                                    <span class="welcomeText">
                                                        Welcome, <b>John Smith</b> | Last Login: 24/05/2005 10:32 AM
                                                    </span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td align="right">
                                                    <a href="/LegacySite/Pages/login.html" style="color: #FFFFFF; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 10px; text-decoration: none;">
                                                        <b>Logout</b>
                                                    </a>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                    <td width="20"><img src="/LegacySite/Data/spacer.gif" width="20" height="1" border="0" alt=""></td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td bgcolor="#E5E5E5" width="180" valign="top">
                            <!-- Left Navigation Menu -->
                            <table width="100%" border="0" cellspacing="0" cellpadding="3">
                                <tr>
                                    <td height="30" bgcolor="#6699CC">
                                        <span class="menuHeaderText">
                                            <b>&nbsp;Main Menu</b>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td bgcolor="#F0F0F0">
                                        <table width="100%" border="0" cellspacing="0" cellpadding="2">
                                            <tr>
                                                <td>
                                                    <img src="/LegacySite/Data/bullet.gif" width="8" height="8" border="0" alt="">
                                                    <a href="/LegacySite/Pages/dashboard.html" class="navLink">Dashboard</a>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <img src="/LegacySite/Data/bullet.gif" width="8" height="8" border="0" alt="">
                                                    <a href="/LegacySite/Pages/settings.html" class="navLink">Account Settings</a>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <img src="/LegacySite/Data/bullet.gif" width="8" height="8" border="0" alt="">
                                                    <a href="/generate-report" class="navLink">Transaction Report</a>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <img src="/LegacySite/Data/bullet.gif" width="8" height="8" border="0" alt="">
                                                    <a href="#" class="navLink" onclick="showHelpDialog(); return false;">Help</a>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                            <br>
                            <!-- Quick Stats Box -->
                            <table width="100%" border="0" cellspacing="0" cellpadding="3">
                                <tr>
                                    <td height="25" bgcolor="#6699CC">
                                        <span class="menuHeaderText">
                                            <b>&nbsp;Quick Stats</b>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td bgcolor="#F0F0F0">
                                        <table width="100%" border="0" cellspacing="0" cellpadding="2">
                                            <tr>
                                                <td>
                                                    <span class="smallText">
                                                        <b>Total Accounts:</b> 5<br>
                                                        <b>Total Balance:</b> $145,230.45<br>
                                                        <b>Last Transfer:</b> 23/05/2005
                                                    </span>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                            <!-- End Left Navigation Menu -->
                        </td>
                        <td valign="top" bgcolor="#FFFFFF">
                            <!-- Main Content Area -->
                            <table width="100%" border="0" cellspacing="0" cellpadding="10">
                                <tr>
                                    <td>
                                        <span class="headerText">
                                            <b>Account Settings</b>
                                        </span>
                                        <hr size="1" noshade color="#CCCCCC">
                                        <br>
                                        <span class="subHeaderText">
                                            Please update your account settings below. Fields marked with an asterisk (*) are required.
                                        </span>
                                        <br><br>
                                        <!-- Settings Form -->
                                        <form name="settingsForm" method="post" action="#" onsubmit="return validateForm();">
                                            <table width="100%" border="0" cellspacing="0" cellpadding="3">
                                                <tr>
                                                    <td colspan="2" bgcolor="#E5E5E5">
                                                        <span class="sectionHeader">
                                                            <b>Personal Information</b>
                                                        </span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td width="170">
                                                        <span class="bodyText">First Name: *</span>
                                                    </td>
                                                    <td>
                                                        <input type="text" name="firstName" value="John" size="30" style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 10px; width: 200px;">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <span class="bodyText">Last Name: *</span>
                                                    </td>
                                                    <td>
                                                        <input type="text" name="lastName" value="Smith" size="30" style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 10px; width: 200px;">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <span class="bodyText">Company: *</span>
                                                    </td>
                                                    <td>
                                                        <input type="text" name="company" value="ABC Corporation" size="30" style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 10px; width: 200px;">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <span class="bodyText">Phone Number:</span>
                                                    </td>
                                                    <td>
                                                        <input type="text" name="phoneNumber" value="0412345678" size="30" onblur="validatePhone(this);" style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 10px; width: 200px;">
                                                        <span id="phoneError" style="visibility: hidden;">
                                                            <span class="errorText">
                                                                Please enter a valid 10-digit phone number
                                                            </span>
                                                        </span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <span class="bodyText">Email Address: *</span>
                                                    </td>
                                                    <td>
                                                        <input type="text" name="email" value="john.smith@abccorp.com.au" size="30" onblur="validateEmail(this);" style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 10px; width: 200px;">
                                                        <span id="emailError" style="visibility: hidden;">
                                                            <span class="errorText">
                                                                Please enter a valid email address
                                                            </span>
                                                        </span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2">&nbsp;</td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2" bgcolor="#E5E5E5">
                                                        <span class="sectionHeader">
                                                            <b>Notification Preferences</b>
                                                        </span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2">
                                                        <table width="100%" border="0" cellspacing="0" cellpadding="2">
                                                            <tr>
                                                                <td>
                                                                    <input type="checkbox" name="notifyLogin" value="1" checked>
                                                                </td>
                                                                <td>
                                                                    <span class="bodyText">
                                                                        Notify me of suspicious login activity
                                                                    </span>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td>
                                                                    <input type="checkbox" name="notifyTransfer" value="1" checked>
                                                                </td>
                                                                <td>
                                                                    <span class="bodyText">
                                                                        Notify me of large transfers (over $10,000)
                                                                    </span>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td>
                                                                    <input type="checkbox" name="notifyStatement" value="1" checked>
                                                                </td>
                                                                <td>
                                                                    <span class="bodyText">
                                                                        Send me monthly account statements via email
                                                                    </span>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td>
                                                                    <input type="checkbox" name="notifyMarketing" value="1">
                                                                </td>
                                                                <td>
                                                                    <span class="bodyText">
                                                                        Send me marketing offers and promotions
                                                                    </span>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2">&nbsp;</td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2" bgcolor="#E5E5E5">
                                                        <span class="sectionHeader">
                                                            <b>Change Password</b>
                                                        </span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <span class="bodyText">Current Password:</span>
                                                    </td>
                                                    <td>
                                                        <input type="password" name="currentPassword" size="30" style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 10px; width: 200px;">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <span class="bodyText">New Password:</span>
                                                    </td>
                                                    <td>
                                                        <input type="password" name="password" size="30" style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 10px; width: 200px;">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <span class="bodyText">Confirm New Password:</span>
                                                    </td>
                                                    <td>
                                                        <input type="password" name="confirmPassword" size="30" style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 10px; width: 200px;">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2">
                                                        <span class="smallText">
                                                            Leave password fields blank if you do not wish to change your password.
                                                        </span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2">&nbsp;</td>
                                                </tr>
                                                <tr>
                                                    <td>&nbsp;</td>
                                                    <td>
                                                        <input type="submit" value="Save Changes" style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 10px; width: 100px; cursor: hand;">
                                                        &nbsp;
                                                        <input type="reset" value="Reset Form" style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 10px; width: 100px; cursor: hand;">
                                                    </td>
                                                </tr>
                                            </table>
                                        </form>
                                        <!-- End Settings Form -->
                                    </td>
                                </tr>
                            </table>
                            <!-- End Main Content Area -->
                        </td>
                        <td bgcolor="#E5E5E5" width="1"><img src="/LegacySite/Data/spacer.gif" width="1" height="1" border="0" alt=""></td>
                    </tr>
                    <tr>
                        <td colspan="3" bgcolor="#003366" height="30" align="center">
                            <span class="copyrightText">
                                Copyright &copy; 2005 Corporate Online. All Rights Reserved.
                            </span>
                        </td>
                    </tr>
                </table>
                <!-- End Content Table -->
            </td>
        </tr>
    </table>
    <!-- End Main Table Container -->
    <!-- Hidden dialog div that will be positioned using JavaScript -->
    <div id="helpDialog" style="display: none; position: absolute; top: 200px; left: 250px; width: 400px; border: 2px solid #003366; background-color: #FFFFFF; padding: 0px;">
        <table width="100%" border="0" cellspacing="0" cellpadding="3" bgcolor="#003366">
            <tr>
                <td>
                    <span class="modalTitle">
                        <b>Corporate Online Help</b>
                    </span>
                </td>
                <td align="right">
                    <a href="#" onclick="hideHelpDialog(); return false;" style="color: #FFFFFF; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 10px; text-decoration: none;">
                        <b>Close [X]</b>
                    </a>
                </td>
            </tr>
        </table>
        <table width="100%" border="0" cellspacing="0" cellpadding="10">
            <tr>
                <td>
                    <span class="bodyText">
                        For assistance with Corporate Online, please contact our support team:<br><br>
                        Phone: 1800 555 123<br>
                        Email: support@corporateonline.com.au<br>
                        Hours: Monday to Friday, 8:00 AM - 6:00 PM AEST
                    </span>
                </td>
            </tr>
        </table>
    </div>
</body>
</html>
